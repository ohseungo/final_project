<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="recycleBox">
	<select id="selectRecycleBox" resultType="RecycleBox">
		select RECYCLEBOXID,RECYCLEBOXLAT,RECYCLEBOXLONG
		from RECYCLEBOX
	</select>
	<insert id="insertRecycleBox" parameterType="RecycleBox">
		insert into RECYCLEBOX(RECYCLEBOXID, RECYCLEBOXLAT, 
		RECYCLEBOXLONG, RECYCLEBOXCOUNT) 
		VALUES (#{recycleBoxId}, #{recycleBoxLat}, #{recycleBoxLong}, #{recycleBoxCount})
	</insert>
	<delete id="deleteRecycleBox" parameterType="String">
		delete from RECYCLEBOX
		where RECYCLEBOXID=#{RECYCLEBOXID}
	</delete>
	<select id="selectRecycleBoxWithCurrLocation" resultType="RecycleBox">
		select RECYCLEBOXID,RECYCLEBOXLAT,RECYCLEBOXLONG
		from RECYCLEBOX
		<where>
		<if test="recycleBoxLat != null">
		 RECYCLEBOXLAT 
		between #{recycleBoxLat}-0.005 and #{recycleBoxLat}+0.005
		</if>
		<if test="recycleBoxLong != null">
		and RECYCLEBOXLONG
		between #{recycleBoxLong}-0.005 and #{recycleBoxLong}+0.005
		</if>
		</where>
	</select>
	<update id="updateRecycleBox" parameterType="RecycleBox">
		update RECYCLEBOX 
		set	   recycleBoxCount=#{recycleBoxCount}
		where  recycleBoxId=#{recycleBoxId}
	</update>
</mapper>